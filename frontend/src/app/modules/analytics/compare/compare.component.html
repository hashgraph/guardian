<div class="content">
    <div *ngIf="loading" class="loading">
        <div class="preloader-image preloader-image-l-size"></div>
    </div>

    <div *ngIf="error" class="error-message">
        <div>{{ error }}</div>
    </div>

    <div *ngIf="result" class="merge-options">
        <div class="merge-back">
            <div *ngIf="parent" (click)="onBack()">
                <!--                <mat-icon>chevron_left</mat-icon>-->

                <i class="pi pi-chevron-left"></i>
                <span>Back</span>
            </div>
        </div>
        <div class="merge-lvl">
            <div *ngIf="isEventsLvl" class="f1">
                <!--                <mat-form-field appearance="outline">-->
                <!--                    <mat-label>Events:</mat-label>-->
                <!--                    <mat-select [(value)]="eventsLvl" (selectionChange)="onFilterChange()">-->
                <!--                        <mat-option value="0">Don't compare</mat-option>-->
                <!--                        <mat-option value="1">All events</mat-option>-->
                <!--                    </mat-select>-->
                <!--                </mat-form-field>-->

                <div class="p-fluid">
                    <label for="eventsDropdown" class="dropdown-border-label">Events:</label>
                    <p-dropdown
                        id="eventsDropdown"
                        [(ngModel)]="eventsLvl.value"
                        [options]="eventOptions"
                        (onChange)="onFilterChange()"
                        [appendTo]="'body'"
                    >
                    </p-dropdown>
                </div>
            </div>
            <div *ngIf="isPropertiesLvl" class="f1">
                <!--                <mat-form-field appearance="outline">-->
                <!--                    <mat-label>Properties:</mat-label>-->
                <!--                    <mat-select [(value)]="propLvl" (selectionChange)="onFilterChange()">-->
                <!--                        <mat-option value="0">Don't compare</mat-option>-->
                <!--                        <mat-option value="1">Only simple properties</mat-option>-->
                <!--                        <mat-option value="2">All properties</mat-option>-->
                <!--                    </mat-select>-->
                <!--                </mat-form-field>-->

                <div class="p-fluid">
                    <label for="propertiesDropdown" class="dropdown-border-label">Properties:</label>
                    <p-dropdown
                        id="propertiesDropdown"
                        [(ngModel)]="propLvl.value"
                        [options]="propertyOptions"
                        placeholder="Select Property Level"
                        (onChange)="onFilterChange()"
                        [appendTo]="'body'"
                    >
                    </p-dropdown>
                </div>
            </div>
            <div *ngIf="isChildrenLvl" class="f1">
                <!--                <mat-form-field appearance="outline">-->
                <!--                    <mat-label>Children:</mat-label>-->
                <!--                    <mat-select [(value)]="childrenLvl" (selectionChange)="onFilterChange()">-->
                <!--                        <mat-option value="0">Don't compare</mat-option>-->
                <!--                        <mat-option value="1">Only child blocks of the first level</mat-option>-->
                <!--                        <mat-option value="2">All children</mat-option>-->
                <!--                    </mat-select>-->
                <!--                </mat-form-field>-->

                <div class="p-fluid">
                    <label for="childrenDropdown" class="dropdown-border-label">Children:</label>
                    <p-dropdown
                        id="childrenDropdown"
                        [(ngModel)]="childrenLvl"
                        [options]="childrenOptions"
                        optionLabel="label"
                        placeholder="Select Children Level"
                        (onChange)="onFilterChange()"
                        [appendTo]="'body'"
                    >
                    </p-dropdown>
                </div>
            </div>
            <div *ngIf="isUUIDLvl" class="f1">
                <!--                <mat-form-field appearance="outline">-->
                <!--                    <mat-label>UUID:</mat-label>-->
                <!--                    <mat-select [(value)]="idLvl" (selectionChange)="onFilterChange()">-->
                <!--                        <mat-option value="0">Don't compare</mat-option>-->
                <!--                        <mat-option value="1">All UUID</mat-option>-->
                <!--                    </mat-select>-->
                <!--                </mat-form-field>-->

                <div class="p-fluid">
                    <label for="uuidDropdown" class="dropdown-border-label">UUID:</label>
                    <p-dropdown
                        id="uuidDropdown"
                        [(ngModel)]="idLvl"
                        [options]="uuidOptions"
                        optionLabel="label"
                        placeholder="Select UUID Level"
                        (onChange)="onFilterChange()"
                        [appendTo]="'body'"
                    >
                    </p-dropdown>
                </div>
            </div>
        </div>
        <div class="merge-lvl-apply">
            <div
                [attr.need-apple]="needApplyFilters"
                *ngIf="isApplyBtn"
                class="merge-lvl-btn"
                (click)="onApply()">Apply
            </div>
        </div>
        <div>
            <div class="export-btn" (click)="onExport()">
                <!--                <mat-icon>download</mat-icon>-->

                <i class="pi pi-download"></i>
                Export
            </div>
        </div>
        <div class="merge-type">
            <div class="f2">
                <!--                <mat-form-field appearance="outline">-->
                <!--                    <mat-label>Type:</mat-label>-->
                <!--                    <mat-select [(value)]="visibleType">-->
                <!--                        <mat-option value="tree">Tree</mat-option>-->
                <!--                        <mat-option value="table">Table</mat-option>-->
                <!--                    </mat-select>-->
                <!--                </mat-form-field>-->

                <div class="p-fluid">
                    <label for="typeDropdown" class="dropdown-border-label">Type:</label>
                    <p-dropdown
                        id="typeDropdown"
                        [(ngModel)]="visibleType"
                        [options]="typeOptions"
                        optionLabel="label"
                        placeholder="Select Type"
                        [appendTo]="'body'">
                    </p-dropdown>
                </div>
            </div>
        </div>
    </div>

    <div *ngIf="isPolicies" class="content-result">
        <app-compare-policy
            [childrenLvl]="childrenLvl.value"
            [eventsLvl]="eventsLvl.value"
            [idLvl]="idLvl.value"
            [propLvl]="propLvl.value"
            [type]="visibleType.value"
            [value]="result"
            (change)="onChange($event)"></app-compare-policy>
    </div>

    <div *ngIf="isSchemas" class="content-result">
        <app-compare-schema
            [type]="visibleType.value"
            [value]="result"
            [idLvl]="idLvl.value"
            (change)="onChange($event)"></app-compare-schema>
    </div>

    <div *ngIf="isModules" class="content-result">
        <app-compare-module
            [childrenLvl]="childrenLvl.value"
            [eventsLvl]="eventsLvl.value"
            [idLvl]="idLvl.value"
            [propLvl]="propLvl.value"
            [type]="visibleType.value"
            [value]="result"
            (change)="onChange($event)"></app-compare-module>
    </div>

    <div *ngIf="isMultiPolicies" class="content-result">
        <app-multi-compare-policy
            [childrenLvl]="childrenLvl.value"
            [eventsLvl]="eventsLvl.value"
            [idLvl]="idLvl.value"
            [propLvl]="propLvl.value"
            [type]="visibleType.value"
            [value]="result"
            (change)="onChange($event)"></app-multi-compare-policy>
    </div>

    <div *ngIf="isDocuments" class="content-result">
        <app-compare-document
            [childrenLvl]="childrenLvl.value"
            [eventsLvl]="eventsLvl.value"
            [idLvl]="idLvl.value"
            [propLvl]="propLvl.value"
            [type]="visibleType.value"
            [value]="result"
            (change)="onChange($event)"></app-compare-document>
    </div>

    <div *ngIf="isTools" class="content-result">
        <app-compare-tool
            [childrenLvl]="childrenLvl.value"
            [eventsLvl]="eventsLvl.value"
            [idLvl]="idLvl.value"
            [propLvl]="propLvl.value"
            [type]="visibleType.value"
            [value]="result"
            (change)="onChange($event)"></app-compare-tool>
    </div>
</div>
