<div class="global-events-writer-block">
    <div class="header">
        <h4>Global events writer</h4>

        <button
            type="button"
            class="btn btn-sm btn-primary"
            (click)="addRow()"
            [disabled]="loading">
            + Add topic
        </button>

        <button
            type="button"
            class="btn btn-sm btn-outline-primary"
            (click)="createTopic()"
            [disabled]="loading">
            + Create topic
        </button>

        <button
            type="button"
            class="btn btn-sm btn-success"
            (click)="submit()"
            [disabled]="!canPublish">
            Publish
        </button>
    </div>

    <div class="doc-type">
        <label>Document type</label>

        <select
            class="form-control form-control-sm"
            [ngModel]="documentType"
            (ngModelChange)="onDocumentTypeChange($event)"
            [disabled]="loading">
            <option
                *ngFor="let opt of documentTypeOptions"
                [ngValue]="opt.value">
                {{ opt.label }}
            </option>
        </select>
    </div>

    <table class="table table-sm table-striped table-bordered">
        <thead>
        <tr>
            <th>Topic ID</th>
            <th style="width: 60px;"></th>
        </tr>
        </thead>

        <tbody>
        <tr *ngFor="let row of topicIds; let i = index">
            <td>
                <input
                    type="text"
                    class="form-control form-control-sm"
                    [(ngModel)]="row.topicId"
                    (ngModelChange)="onTopicIdChange()"
                    [disabled]="loading"
                >
            </td>

            <td class="text-center">
                <button
                    type="button"
                    class="btn btn-sm btn-outline-danger"
                    (click)="removeRow(i)"
                    [disabled]="loading">
                    âœ•
                </button>
            </td>
        </tr>

        <tr *ngIf="topicIds.length === 0">
            <td colspan="2" class="text-center text-muted">
                No topics configured yet.
            </td>
        </tr>
        </tbody>
    </table>
</div>
