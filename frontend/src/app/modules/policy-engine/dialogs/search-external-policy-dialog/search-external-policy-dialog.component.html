<div class="dialog-header">
    <div class="header-container">
        <div class="header-text">Search Policy</div>
    </div>
    <div class="header-icon" (click)="onClose()">
        <svg-icon src="/assets/images/icons/close.svg" svgClass="icon-color-close"></svg-icon>
    </div>
</div>
<div class="dialog-body">
    <div class="context">
        <div *ngIf="loading" class="guardian-loading">
            <div class="guardian-loading-image"></div>
        </div>

        <ng-container *ngIf="step===1">
            <div class="guardian-input-container">
                <label class="form-label">* Message timestamp</label>
                <input [(ngModel)]="timestamp" pInputText type="text"/>
            </div>
        </ng-container>
        <ng-container *ngIf="step===2">
            <div class="policy-container">
                <div class="guardian-input-container">
                    <label class="form-label">Name</label>
                    <div class="guardian-input-readonly">{{policy?.policy?.name || 'N\\A'}}</div>
                </div>
                <div class="guardian-input-container">
                    <label class="form-label">Description</label>
                    <div class="guardian-input-readonly">{{policy?.policy?.description || 'N\\A'}}</div>
                </div>
                <div class="guardian-input-container">
                    <label class="form-label">Version</label>
                    <div class="guardian-input-readonly">{{policy?.policy?.version || 'N\\A'}}</div>
                </div>
                <div class="guardian-input-container">
                    <label class="form-label">Type</label>
                    <div class="guardian-input-readonly">{{policy?.availability === 'public' ? 'Public' : 'Private'}}</div>
                </div>
            </div>
        </ng-container>
        <ng-container *ngIf="step===0">
            <div class="error-message">{{error}}</div>
        </ng-container>


    </div>
</div>
<div class="dialog-footer">
    <div class="action-buttons">
        <div class="dialog-button">
            <button 
                (click)="onClose()" 
                class="guardian-button guardian-button-secondary">Close</button>
        </div>
        <div *ngIf="step===1" class="dialog-button">
            <button 
                (click)="onSearch()" 
                class="guardian-button guardian-button-primary"
                [disabled]="!timestamp">Search</button>
        </div>
        <div *ngIf="step===2" class="dialog-button">
            <button 
                (click)="onSubmit()" 
                class="guardian-button guardian-button-primary"
                [disabled]="!policy">Import</button>
        </div>
        <div *ngIf="step===0" class="dialog-button">
            <button 
                (click)="onPrev()" 
                class="guardian-button guardian-button-primary">Prev</button>
        </div>
    </div>
</div>