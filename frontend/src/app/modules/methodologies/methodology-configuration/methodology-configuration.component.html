<div class="guardian-page" [attr.readonly]="readonly">
    <div *ngIf="loading" class="guardian-loading">
        <div class="guardian-loading-image"></div>
    </div>

    <div *ngIf="!isConfirmed" class="guardian-user-not-registered">
        Before starting work you need to get DID
        <a [routerLink]="['/profile']">here</a>
    </div>

    <div class="header-container">
        <div class="guardian-user-back-button">
            <button 
                (click)="onBack()" 
                class="guardian-button guardian-button-primary">
                <div class="guardian-button-icon">
                    <svg-icon class="icon-btn svg-icon"
                        src="/assets/images/icons/left-arrow.svg"
                        svgClass="icon-color-secondary">
                    </svg-icon>
                </div>
                <div class="guardian-button-label">Back to Policies</div>
            </button>
        </div>
    
        <div class="guardian-user-page-header">
            <span>{{item?.name}}</span>
            <div *ngIf="policy" class="policy-name">
                <span>Policy Name: {{policy.name}}</span>
                <span class="policy-version">Version: {{policy.version}}</span>
            </div>
        </div>
    </div>
    <div class="body-container">
        <div class="formula-items">

            <ng-container *ngFor="let item of items">
                <div class="formula-item" *ngIf="item.type === 'constant'">
                    <div class="guardian-input-container">
                        <label class="form-label" htmlFor="version">* Name</label>
                        <input [(ngModel)]="item.name" pInputText type="text" [readonly]="readonly"/>
                    </div>
                    <div class="guardian-input-container">
                        <label class="form-label" htmlFor="version">* Description</label>
                        <input [(ngModel)]="item.description" pInputText type="text" [readonly]="readonly"/>
                    </div>
                </div>

                <div class="formula-item" *ngIf="item.type === 'variable'">
                    <div class="guardian-input-container">
                        <label class="form-label" htmlFor="version">* Name</label>
                        <input [(ngModel)]="item.name" pInputText type="text" [readonly]="readonly"/>
                    </div>
                    <div class="guardian-input-container">
                        <label class="form-label" htmlFor="version">* Description</label>
                        <input [(ngModel)]="item.description" pInputText type="text" [readonly]="readonly"/>
                    </div>
                </div>

                <div class="formula-item" *ngIf="item.type === 'formula'">
                    <div class="guardian-input-container">
                        <label class="form-label" htmlFor="version">* Name</label>
                        <input [(ngModel)]="item.name" pInputText type="text" [readonly]="readonly"/>
                    </div>
                    <div class="guardian-input-container">
                        <label class="form-label" htmlFor="version">* Description</label>
                        <input [(ngModel)]="item.description" pInputText type="text" [readonly]="readonly"/>
                    </div>
                    <math-live [(value)]="item.value"></math-live>
                </div>
                
                <div class="formula-item" *ngIf="item.type === 'text'">
                    <div class="guardian-input-container">
                        <label class="form-label" htmlFor="version">* Name</label>
                        <input [(ngModel)]="item.name" pInputText type="text" [readonly]="readonly"/>
                    </div>
                    <div class="guardian-input-container">
                        <label class="form-label" htmlFor="version">* Description</label>
                        <input [(ngModel)]="item.description" pInputText type="text" [readonly]="readonly"/>
                    </div>
                </div>
            </ng-container>
        </div>

        <button (click)="addItem('constant')" class="guardian-button guardian-button-primary">Add Constant</button>
        <button (click)="addItem('variable')" class="guardian-button guardian-button-primary">Add Variable</button>
        <button (click)="addItem('formula')" class="guardian-button guardian-button-primary">Add Formula</button>
        <button (click)="addItem('text')" class="guardian-button guardian-button-primary">Add Text</button>
    </div>
</div>