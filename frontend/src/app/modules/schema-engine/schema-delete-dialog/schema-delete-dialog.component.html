<div class="dialog-header">
    <div class="header-container">
        <i class="pi pi-exclamation-triangle delete-icon"></i><div class="header-text">{{ header }}</div>
    </div>
    <div class="header-icon" (click)="onClose()">
        <svg-icon src="/assets/images/icons/close.svg" svgClass="icon-color-close"></svg-icon>
    </div>
</div>

<div class="dialog-body">
    <div *ngIf="loading" class="loading">
        <div class="preloader-image preloader-image-l-size"></div>
    </div>

    <ng-container *ngIf="itemNames && itemNames.length && itemNames.length > 0; else notItemsToDelete">
        <div class="delete-text" *ngIf="itemNames && itemNames.length && itemNames.length == 1">
            Are you want to delete the "{{ itemNames[0] }}" schema?
        </div>

        <div *ngIf="itemNames && itemNames.length && itemNames.length > 1">
            <div class="delete-text">
                You are about to delete the following schemas:
            </div>
            <ul style="margin-top: 0;">
                <li *ngFor="let item of itemNames">
                    {{ item }}
                </li>
            </ul>
        </div>
    </ng-container>
    <ng-template #notItemsToDelete>
        <div class="delete-text">
            There are no items to delete.
        </div>
    </ng-template>

    <div class="child-schemas-block" *ngIf="(deletableChildren?.length && deletableChildren.length > 0) || (blockedChildren?.length && blockedChildren.length > 0)">
        <ng-container *ngIf="deletableChildren?.length && deletableChildren.length > 0">
            <p class="delete-text" *ngIf="itemNames && itemNames.length && itemNames.length == 1">The "{{ itemNames[0] }}" schema includes child schemas. Select the checkbox below to also delete the following child schemas:</p>
            <p class="delete-text" *ngIf="itemNames && itemNames.length && itemNames.length > 1">These schemas include child schemas. Select the checkbox below to also delete the following child schemas:</p>
            <div class="schemas-block">
                <ul class="schemas-list">
                    <li *ngFor="let item of deletableChildren">
                        <p class="child-item">{{ item.name }}</p>
                    </li>
                </ul>
            </div>
        </ng-container>

        <ng-container *ngIf="blockedChildren?.length && blockedChildren.length > 0">
            <p class="delete-text">Schemas referenced by other parents (will not be deleted):</p>
            <div class="schemas-block">
                <ul class="schemas-list">
                    <li *ngFor="let item of blockedChildren">
                        <p class="child-cant-delete-item">
                            {{ item?.schema + ' (depends on: ' + item?.blockingSchemas?.join(', ') + ')' }}
                        </p>
                    </li>
                </ul>
            </div>
        </ng-container>
        
        <ng-container *ngIf="deletableChildren?.length && deletableChildren.length > 0">
            <div style="margin-top: 16px;">
                <p-checkbox
                    class="guardian-checkbox-secondary checkbox-24"
                    [(ngModel)]="includeChildren"
                    [binary]="true"
                    [styleClass]="'primary-checkbox'"
                    label="Delete child schemas"
                ></p-checkbox>
            </div>
        </ng-container>
    </div>
</div>

<div class="dialog-footer">
    <div class="action-buttons">
        <div class="secondary-button">
            <button
                (click)="onClose()" 
                class="guardian-button guardian-button-secondary">Close</button>
        </div>
        <div *ngIf="itemNames && itemNames.length && itemNames.length > 0"
            class="delete-button">
            <button
                (click)="onDelete()" 
                class="guardian-button guardian-button-delete">Delete</button>
        </div>
    </div>
</div>