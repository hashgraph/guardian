<div class="dialog-header">
    <div class="header-container">
        <div class="header-text">{{header}}</div>
    </div>
    <div class="header-icon" (click)="onClose()">
        <svg-icon src="/assets/images/icons/close.svg" svgClass="icon-color-close"></svg-icon>
    </div>
</div>
<div class="dialog-body">
    <div *ngIf="!started" class="guardian-loading">
        <div class="guardian-loading-image"></div>
    </div>
    <div class="g-dialog-header">
        <p-tabView class="guardian-tabs action-tabs">
            <p-tabPanel *ngFor="let tab of items; let i = index">
                <ng-template pTemplate="header">
                    <div (click)="onChangeTab(i)" class="tabview-label">
                        {{ tab.label }}
                    </div>
                </ng-template>
            </p-tabPanel>
        </p-tabView>
    </div>
    <div class="g-dialog-body">
        <div style="padding-right: 12px;">
            <div *ngIf="error && json" class="error-message">
                {{error}}
            </div>
            <app-schema-configuration
                #schemaControl
                [hidden]="!!json"
                [type]="type"
                [value]="schema"
                [extended]="extended"
                [schemaType]="schemaType"
                [modules]="modules"
                [policies]="policies"
                [topicId]="topicId"
                [properties]="properties"
                [tools]="tools"
                (change-form)="onChangeForm($event)"
                (use-update-sub-schemas)="onLoadSubSchemas($event)"
            >
            </app-schema-configuration>
            <ngx-codemirror 
                *ngIf="json"
                (ngModelChange)="onChangeDocument($event)"
                [(ngModel)]="document"
                [options]="codeMirrorOptions">
            </ngx-codemirror>
        </div>
    </div>
</div>
<div class="dialog-footer">
    <div class="action-buttons">
        <div class="cancel-button">
            <button 
                (click)="onClose()" 
                class="guardian-button guardian-button-secondary"
            >Cancel</button>
        </div>
        <div>
            <button 
                (click)="onCreate()" 
                [disabled]="disabled"
                class="guardian-button guardian-button-primary"
            >Save</button>
        </div>
    </div>
</div>
