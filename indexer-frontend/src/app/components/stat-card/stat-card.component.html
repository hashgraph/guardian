<div class="card">
    <div class="card-title">
        <div class="card-title__label">{{selectedStatData.label | transloco}}</div>
        <div>
            <p-selectButton [options]="stateOptions" [(ngModel)]="type" [unselectable]="true" optionLabel="label"
                optionValue="value" />
        </div>
    </div>

    <div class="card-value" (click)="onOpen()">
        @switch (type) {
        @case ('count') {
        <div #counter class="card-value__value" [attr.data-target]="selectedStatData.count">{{numberWithCommas(selectedStatData.count)}}</div>
        @if (selectedStatData.upcount && selectedStatData.upcount > 0) {
        <div class="card-value__up-count">+{{selectedStatData.upcount}}</div>
        }
        }
        @case ('graph') {
        <p-chart class="chart" type="line" [data]="selectedStatData.chartData" [options]="options" width="580" height="260" />
        }
        }
    </div>
        
    @if (tabOptions.length > 1) {
        <div class="sub-tabs" (click)="onSubTabClick($event)">
            <div>
                <p-selectButton [options]="tabOptions" (onOptionClick)="onSubTabSelect($event)" [(ngModel)]="selectedStatIndex" [unselectable]="true" optionLabel="label"
                    optionValue="value" />
            </div>
        </div>
    }
</div>
