openapi: 3.0.0
info:
  title: "Guardian"
  description: "The Guardian is a modular open-source solution that includes best-in-class identity management and decentralized ledger technology (DLT) libraries. At the heart of the Guardian solution is a sophisticated Policy Workflow Engine (PWE) that enables applications to offer a requirements-based tokenization implementation."
  version: "1.0.0"
  contact:
    name: "API developer"
    url: "https://envisionblockchain.com"
    email: "info@envisionblockchain.com"
  license:
    name: "Apache 2.0"
    url: "http://www.apache.org/licenses/LICENSE-2.0.html"
servers:
- url: /api/v1
  description: version 1.0
components:
  securitySchemes:
    bearerAuth:
      type: "http"
      scheme: "bearer"
      bearerFormat: "JWT"
  schemas:
    Credentials:
      type: object
      required:
        - username
        - password
      properties:
        username:
          type: string
        password:
          type: string
    Account:
      type: object
      required:
        - username
        - role
      properties:
        username:
          type: string
        role:
          type: string
        did:
          type: string
    Session:
      type: object
      required:
        - username
        - role
        - accessToken
      properties:
        username:
          type: string
        role:
          type: string
        accessToken:
          type: string
    User:
      type: object
      required:
        - username
        - role
      properties:
        confirmed:
          type: string
        failed:
          type: string
        username:
          type: string
        role:
          type: string
        hederaAccountId:
          type: string
        hederaAccountKey:
          type: string
        did:
          type: string
        didDocument:
            type: object
        vcDocument:
            type: object
        addressBook:
          type: object
          properties:
            appnetName:
              type: string
            addressBook:
              type: string
            didTopic:
              type: string
            vcTopic:
              type: string
            didServerUrl:
              type: string
            didTopicMemo:
              type: string
            vcTopicMemo:
              type: string
    Schema:
      type: object
      required:
        - id
        - name
        - description
        - entity
        - document
      properties:
        id:
          type: string
        uuid:
          type: string
        name:
          type: string
        description:
          type: string
        entity:
          type: string
        hash:
          type: string
        status:
          type: string
        document:
          type: string
    ImportSchema:
      type: object
      required:
        - schemes
      properties:
        schemes:
          type: array
          items:
            type: object
            required:
              - document
              - entity
              - name
              - uuid
            properties:
              document:
                type: string
              entity:
                type: string
              hash:
                type: string
              name:
                type: string
              uuid:
                type: string
    ExportSchema:
      type: object
      required:
        - ids
      properties:
        name:
          type: string
        version:
          type: string
        messageId:
          type: string
    Token:
      type: object
      required:
        - changeSupply
        - decimals
        - enableAdmin
        - enableKYC
        - enableFreeze
        - enableWipe
        - initialSupply
        - tokenName
        - tokenSymbol
        - tokenType
      properties:
        changeSupply:
          type: boolean
        decimals:
          type: string
        enableAdmin:
          type: boolean
        enableFreeze:
          type: boolean
        enableKYC:
          type: boolean
        enableWipe:
          type: boolean
        initialSupply:
          type: string
        tokenName:
          type: string
        tokenSymbol:
          type: string
        tokenType:
          type: string
    TokenInfo:
      type: object
      required:
        - id
        - tokenId
        - tokenName
        - tokenSymbol
        - tokenType
        - decimals
        - associated
        - balance
        - frozen
        - kyc
      properties:
        id:
          type: string
        tokenId:
          type: string
        tokenName:
          type: string
        tokenSymbol:
          type: string
        tokenType:
          type: string
        decimals:
          type: string
        associated:
          type: boolean
        balance:
          type: string
        frozen:
          type: boolean
        kyc:
          type: boolean
    PolicyConfig:
      type: object
      required:
        - name
        - version
        - description
        - topicDescription
        - config
        - topicId
        - policyTag
      properties:
        name:
          type: string
        version:
          type: string
        description:
          type: string
        topicDescription:
          type: string
        config:
          type: object
        status:
          type: string
        owner:
          type: string
        policyRoles:
          type: array
          items:
            type: string
        topicId:
          type: string
        policyTag:
          type: string
    TrustChains:
      type: object
      required:
        - chain
        - userMap
      properties:
        chain:
          type: array
          items:
            type: object
            required:
              - id
              - type
              - tag
              - label
              - schema
              - owner
              - document
            properties:
              id:
                type: string
              type:
                type: string
              tag:
                type: string
              label:
                type: string
              schema:
                type: string
              owner:
                type: string
              document:
                type: object
        userMap:
          type: array
          items:
            type: object
            required:
              - did
              - username
            properties:
              did:
                type: string
              username:
                type: string
    VerifiablePresentation:
      type: object
      required:
        - hash
        - id
        - policyId
        - signature
        - status
        - tag
        - type
        - updateDate
        - createDate
        - owner
        - document
      properties:
        hash:
          type: string
        id:
          type: string
        policyId:
          type: string
        signature:
          type: string
        status:
          type: string
        tag:
          type: string
        type:
          type: string
        updateDate:
          type: string
        createDate:
          type: string
        owner:
          type: string
        document:
          type: object
    PublishPolicy:
      type: object
      required:
        - errors
        - isValid
        - policies
      properties:
        errors:
          type: array
          items:
            type: object
        isValid:
          type: boolean
        policies:
          type: array
          items:
            type: object
    ValidatePolicy:
      type: object
      required:
        - config
        - results
      properties:
        config:
          type: object
        results:
          type: object
    PolicyBlock:
      type: object
      required:
        - id
        - blockType
        - isActive
        - uiMetaData
      properties:
        id:
          type: string
        blockType:
          type: string
        isActive:
          type: boolean
        uiMetaData:
          type: object
        blocks:
          type: array
          items:
            type: object
    PolicyBlockData:
      type: object
      required:
        - id
        - isActive
        - uiMetaData
        - data
      properties:
        id:
          type: string
        blockType:
          type: string
        isActive:
          type: boolean
        uiMetaData:
          type: object
        data:
          type: object
        fields:
          type: array
          items:
            type: object
        index:
          type: number
        roles:
          type: array
          items:
            type: string
        blocks:
          type: array
          items:
            $ref: '#/components/schemas/PolicyBlock'
    ExportPolicy:
      type: object
      required:
        - name
        - version
        - messageId
      properties:
        name:
          type: string
        version:
          type: string
        tokens:
          type: string
    PreviewPolicy:
      type: object
      required:
        - policy
        - schemas
        - tokens
      properties:
        policy:
          type: object
        schemas:
          type: array
          items:
            type: object
        tokens:
          type: array
          items:
            type: object
    Error:
      type: object
      required:
        - code
        - message
      properties:
        code:
          type: number
        message:
          type: string
    ExternalData:
      type: object
      required:
        - owner
        - policyTag
        - document
      properties:
        owner:
          type: string
        policyTag:
          type: string
        document:
          type: object
    HederaAccount:
      type: object
      required:
        - id
        - key
      properties:
        id:
          type: string
        key:
          type: string
    CommonSettings:
      type: object
      properties:
        operatorId:
          type: string
        operatorKey:
          type: string
        schemaTopicId:
          type: string
        nftApiKey:
          type: string
    LogFilters:
      type: object
      properties:
        type:
          type: string
        startDate:
          type: string
        endDate:
          type: string
        attributes:
          type: array
          items:
            type: string
        message:
          type: string
        pageSize:
          type: number
        pageIndex:
          type: number
        sortDirection:
          type: string
          enum: [ASC, DESC]
    Log:
      type: object
      properties:
        type:
          type: string
        datetime:
          type: string
        message:
          type: string
        attributes:
          type: array
          items:
            type: string
tags:
  - name: "accounts"
    description: "Operations related to Guardian users"
  - name: "profiles"
    description: "Hedera profile related operations"
  - name: "schemas"
    description: "Operations with data schemas"
  - name: "tokens"
    description: "Everything about tokens"
  - name: "trustchains"
    description: "Audit and trust chain"
  - name: "policies"
    description: "Policy engine operations"
  - name: "external"
    description: "APIs for external data sources"
  - name: "demo"
    description: "Demo Only APIs"
  - name: "ipfs"
    description: "IPFS Operations"
  - name: "settings"
    description: "Settings operations"
  - name: "logs"
    description: "Logs operations"
paths:
  /accounts:
    get:
      tags:
        - accounts
      description: Returns all users except those with roles Root Authority and Auditor. Only users with the Root Authority role are allowed to make the request.
      security:
      - bearerAuth: []
      summary: Returns a list of users, excluding Root Authority and Auditors.
      responses:
        200:
          description: Successful operation.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Account'
        401:
          description: Unauthorized.
        403:
          description: Forbidden.
        500:
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /accounts/session:
    get:
      tags:
        - accounts
      description: Returns current user session.
      security:
      - bearerAuth: []
      summary: Returns current session of the user.
      responses:
        200:
          description: Successful operation.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Session'
        401:
          description: Unauthorized.
        500:
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /accounts/register:
    post:
      tags:
        - accounts
      summary: Registers a new user account.
      requestBody:
        description: Object that contain username, password and role (optional) fields.
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Credentials"
      responses:
        201:
          description: Successful operation.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Account'
        500:
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /accounts/login:
    post:
      tags:
        - accounts
      summary: Logs user into the system.
      requestBody:
        description: Object that contains username and password fields.
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Credentials"
      responses:
        200:
          description: Successful operation.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Session'
        500:
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /profiles/{username}/balance:
    get:
      tags:
        - profiles
      description: Requests Hedera account balance. Only users with the Installer role are allowed to make the request.
      parameters:
        - in: path
          name: username
          schema:
            type: string
          required: true
          description: The name of the user for whom to fetch the balance.
      security:
      - bearerAuth: []
      summary: Returns user's Hedera account balance.
      responses:
        200:
          description: Successful operation.
          content:
            application/json:
              schema:
                type: string
        401:
          description: Unauthorized.
        403:
          description: Forbidden.
        500:
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /profiles/{username}:
    get:
      tags:
        - profiles
      description: Returns user account information. For users with the Root Authority role it also returns address book and VC document information.
      parameters:
        - in: path
          name: username
          schema:
            type: string
          required: true
          description: The name of the user for whom to fetch the information.
      security:
      - bearerAuth: []
      summary: Returns user account info.
      responses:
        200:
          description: Successful operation.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        401:
          description: Unauthorized.
        403:
          description: Forbidden.
        500:
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    put:
      tags:
        - profiles
      description: Sets Hedera credentials for the user. For users with the Root Authority role it also creates an address book.
      parameters:
        - in: path
          name: username
          schema:
            type: string
          required: true
          description: The name of the user for whom to update the information.
      security:
      - bearerAuth: []
      summary: Sets Hedera credentials for the user.
      requestBody:
        description: Object that contains the Hedera account data.
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/User"
      responses:
        201:
          description: Successful operation.
        401:
          description: Unauthorized.
        403:
          description: Forbidden.
        500:
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /schemas:
    post:
      tags:
        - schemas
      description: Creates new schema. Only users with the Root Authority role are allowed to make the request.
      security:
      - bearerAuth: []
      summary: Create new schema.
      requestBody:
        description: Object that contains a valid schema.
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Schema"
      responses:
        201:
          description: Successful operation.
        401:
          description: Unauthorized.
        403:
          description: Forbidden.
        500:
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

    get:
      tags:
        - schemas
      description: Returns all schemas.
      security:
      - bearerAuth: []
      summary: Returns all schemas.
      responses:
        200:
          description: Successful operation.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Schema'
        401:
          description: Unauthorized.
        403:
          description: Forbidden.
        500:
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /schemas/{schemaId}/publish:
    put:
      tags:
        - schemas
      description: Publishes the schema with the provided (internal) schema ID onto IPFS, sends a message featuring IPFS CID into the corresponding Hedera topic. Only users with the Root Authority role are allowed to make the request.
      parameters:
        - in: path
          name: schemaId
          schema:
            type: string
          required: true
          description: Schema ID.
      security:
      - bearerAuth: []
      summary: Publishes the schema.
      requestBody:
        description: Object that contains policy version.
        required: true
        content:
          application/json:
              schema:
                type: object
                properties:
                  version:
                    type: string
      responses:
        200:
          description: Successful operation.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Schema'
        401:
          description: Unauthorized.
        403:
          description: Forbidden.
        500:
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /schemas/{schemaId}:
    put:
      tags:
        - schemas
      description: Updates the schema with the provided schema ID. Only users with the Root Authority role are allowed to make the request.
      parameters:
        - in: path
          name: schemaId
          schema:
            type: string
          required: true
          description: Schema ID.
      security:
      - bearerAuth: []
      summary: Updates the schema.
      requestBody:
        description: Object that contains a valid schema.
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Schema"
      responses:
        200:
          description: Successful operation.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Schema'
        401:
          description: Unauthorized.
        403:
          description: Forbidden.
        500:
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

    delete:
      tags:
        - schemas
      description: Deletes the schema with the provided schema ID. Only users with the Root Authority role are allowed to make the request.
      parameters:
        - in: path
          name: schemaId
          schema:
            type: string
          required: true
          description: Schema ID.
      security:
      - bearerAuth: []
      summary: Deletes the schema.
      responses:
        200:
          description: Successful operation.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Schema'
        401:
          description: Unauthorized.
        403:
          description: Forbidden.
        500:
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /schemas/import/file:
    post:
      tags:
        - schemas
      description: Imports new schema from a zip file into the local DB. Only users with the Root Authority role are allowed to make the request.
      security:
      - bearerAuth: []
      summary: Imports new schema from a zip file.
      requestBody:
        description: A zip file containing schema to be imported.
        required: true
      responses:
        201:
          description: Successful operation.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Schema'
        401:
          description: Unauthorized.
        403:
          description: Forbidden.
        500:
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /schemas/import/message:
    post:
      tags:
        - schemas
      description: Imports new schema from IPFS into the local DB. Only users with the Root Authority role are allowed to make the request.
      security:
      - bearerAuth: []
      summary: Imports new schema from IPFS.
      requestBody:
        description: Object that contains the identifier of the Hedera message which contains the IPFS CID of the schema.
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                messageId:
                  type: string
      responses:
        201:
          description: Successful operation.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Schema'
        401:
          description: Unauthorized.
        403:
          description: Forbidden.
        500:
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /schemas/import/message/preview:
    post:
      tags:
        - schemas
      description: Previews the schema from IPFS without loading it into the local DB. Only users with the Root Authority role are allowed to make the request.
      security:
      - bearerAuth: []
      summary: Schema preview from IPFS.
      requestBody:
        description: Object that contains the identifier of the Hedera message which contains the IPFS CID of the schema.
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                messageId:
                  type: string
      responses:
        200:
          description: Successful operation.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Schema'
        401:
          description: Unauthorized.
        403:
          description: Forbidden.
        500:
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
                
  /schemas/import/file/preview:
    post:
      tags:
        - schemas
      description: Previews the schema from a zip file. Only users with the Root Authority role are allowed to make the request.
      security:
      - bearerAuth: []
      summary: Schema preview from a zip file.
      requestBody:
        description: A zip file containing the schema to be viewed.
        required: true
      responses:
        200:
          description: Successful operation.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Schema'
        401:
          description: Unauthorized.
        403:
          description: Forbidden.
        500:
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /schemas/{schemaId}/export/message:
    post:
      tags:
        - schemas
      description: Returns Hedera message IDs of the published schemas, these messages contain IPFS CIDs of these schema files. Only users with the Root Authority role are allowed to make the request.
      security:
      - bearerAuth: []
      summary: List Hedera message IDs of published schemas.
      parameters:
        - in: path
          name: schemaId
          schema:
            type: string
          required: true
          description: Selected schema ID.
      responses:
        200:
          description: Successful operation.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ExportSchema"
        401:
          description: Unauthorized.
        403:
          description: Forbidden.
        500:
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /schemas/{schemaId}/export/file:
    post:
      tags:
        - schemas
      description: Returns schema files for the schemas. Only users with the Root Authority role are allowed to make the request.
      security:
      - bearerAuth: []
      summary: Return zip file with schemas.
      parameters:
        - in: path
          name: schemaId
          schema:
            type: string
          required: true
          description: Selected schema ID.
      responses:
        200:
          description: Successful operation. Response zip file
        401:
          description: Unauthorized.
        403:
          description: Forbidden.
        500:
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /tokens:
    get:
      tags:
        - tokens
      description: Returns all tokens. For the Root Authority role it returns only the list of tokens, for other users it also returns token balances as well as the KYC, Freeze, and Association statuses. Not allowed for the Auditor role.
      security:
      - bearerAuth: []
      summary: Return a list of tokens.
      responses:
        200:
          description: Successful operation.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/TokenInfo'
        401:
          description: Unauthorized.
        403:
          description: Forbidden.
        500:
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

    post:
      tags:
        - tokens
      description: Creates a new token. Only users with the Root Authority role are allowed to make the request.
      security:
      - bearerAuth: []
      summary: Creates a new token.
      requestBody:
        description: Object that contains token information.
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Token"
      responses:
        201:
          description: Successful operation.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/TokenInfo'
        400:
          description: Bad Request.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        401:
          description: Unauthorized.
        403:
          description: Forbidden.
        500:
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /tokens/{tokenId}/{username}/info:
    get:
      tags:
        - tokens
      description: Returns user information for the selected token. Only users with the Root Authority role are allowed to make the request.
      security:
      - bearerAuth: []
      parameters:
        - in: path
          name: tokenId
          schema:
            type: string
          required: true
          description: Token ID.
        - in: path
          name: username
          schema:
            type: string
          required: true
          description: Username.
      responses:
        200:
          description: Successful operation.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TokenInfo'
        400:
          description: Bad Request.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        401:
          description: Unauthorized.
        403:
          description: Forbidden.
        500:
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /tokens/{tokenId}/associate:
    put:
      tags:
        - tokens
      description: Associates the user with the provided Hedera token. Only users with the Installer role are allowed to make the request.
      parameters:
        - in: path
          name: tokenId
          schema:
            type: string
          required: true
          description: Token ID.
      security:
      - bearerAuth: []
      summary: Associates the user with the provided Hedera token.
      responses:
        200:
          description: Successful operation.
        401:
          description: Unauthorized.
        403:
          description: Forbidden.
        500:
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /tokens/{tokenId}/dissociate:
    put:
      tags:
        - tokens
      description: Disassociates the user with the provided Hedera token. Only users with the Installer role are allowed to make the request.
      parameters:
        - in: path
          name: tokenId
          schema:
            type: string
          required: true
          description: Token ID.
      security:
      - bearerAuth: []
      summary: Associate the user with the provided Hedera token.
      responses:
        200:
          description: Successful operation.
        401:
          description: Unauthorized.
        403:
          description: Forbidden.
        500:
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /tokens/{tokenId}/{username}/grantKyc:
    put:
      tags:
        - tokens
      description: Sets the KYC flag for the user. Only users with the Root Authority role are allowed to make the request.
      parameters:
        - in: path
          name: tokenId
          schema:
            type: string
          required: true
          description: Token ID.
        - in: path
          name: username
          schema:
            type: string
          required: true
          description: Username.
      security:
      - bearerAuth: []
      summary: Sets the KYC flag for the user.
      responses:
        200:
          description: Successful operation.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TokenInfo'
        400:
          description: Bad Request.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        401:
          description: Unauthorized.
        403:
          description: Forbidden.
        500:
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /tokens/{tokenId}/{username}/revokeKyc:
    put:
      tags:
        - tokens
      description: Unsets the KYC flag for the user. Only users with the Root Authority role are allowed to make the request.
      parameters:
        - in: path
          name: tokenId
          schema:
            type: string
          required: true
          description: Token ID.
        - in: path
          name: username
          schema:
            type: string
          required: true
          description: Username.
      security:
      - bearerAuth: []
      summary: Unsets the KYC flag for the user.
      responses:
        200:
          description: Successful operation.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TokenInfo'
        400:
          description: Bad Request.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        401:
          description: Unauthorized.
        403:
          description: Forbidden.
        500:
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /tokens/{tokenId}/{username}/freeze:
    put:
      tags:
        - tokens
      description: Freezes transfers of the specified token for the user. Only users with the Root Authority role are allowed to make the request.
      parameters:
        - in: path
          name: tokenId
          schema:
            type: string
          required: true
          description: Token ID.
        - in: path
          name: username
          schema:
            type: string
          required: true
          description: Username.
      security:
      - bearerAuth: []
      summary: Freeze transfers of the specified token for the user.
      responses:
        200:
          description: Successful operation.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TokenInfo'
        400:
          description: Bad Request.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        401:
          description: Unauthorized.
        403:
          description: Forbidden.
        500:
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /tokens/{tokenId}/{username}/unfreeze:
    put:
      tags:
        - tokens
      description: Unfreezes transfers of the specified token for the user. Only users with the Root Authority role are allowed to make the request.
      parameters:
        - in: path
          name: tokenId
          schema:
            type: string
          required: true
          description: Token ID.
        - in: path
          name: username
          schema:
            type: string
          required: true
          description: Username.
      security:
      - bearerAuth: []
      summary: Unfreezes transfers of the specified token for the user.
      responses:
        200:
          description: Successful operation.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TokenInfo'
        400:
          description: Bad Request.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        401:
          description: Unauthorized.
        403:
          description: Forbidden.
        500:
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /trustchains:
    get:
      tags:
        - trustchains
      description: Requests all VP documents. Only users with the Auditor role are allowed to make the request.
      security:
      - bearerAuth: []
      summary: Returns a list of all VP documents.
      responses:
        200:
          description: Successful operation.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/VerifiablePresentation'
        401:
          description: Unauthorized.
        403:
          description: Forbidden.
        500:
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /trustchains/{hash}:
    get:
      tags:
        - trustchains
      description: Builds and returns a trustchain, from the VP to the root VC document. Only users with the Auditor role are allowed to make the request.
      parameters:
        - in: path
          name: hash
          schema:
            type: string
          required: true
          description: Hash or ID of a VP document.
      security:
      - bearerAuth: []
      summary: Returns a trustchain for a VP document.
      responses:
        200:
          description: Successful operation.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TrustChains'
        401:
          description: Unauthorized.
        403:
          description: Forbidden.
        500:
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /policies:
    get:
      tags:
        - policies
      description: Returns all policies. Only users with the Root Authority and Installer role are allowed to make the request.
      security:
        - bearerAuth: []
      summary: Return a list of all policies.
      responses:
        200:
          description: Successful operation.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/PolicyConfig'
        401:
          description: Unauthorized.
        403:
          description: Forbidden.
        500:
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

    post:
      tags:
        - policies
      description: Creates a new policy. Only users with the Root Authority role are allowed to make the request.
      security:
      - bearerAuth: []
      summary: Creates a new policy.
      requestBody:
        description: Object that contains policy configuration.
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/PolicyConfig"
      responses:
        200:
          description: Successful operation.
        401:
          description: Unauthorized.
        403:
          description: Forbidden.
        500:
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /policies/{policyId}:
    get:
      tags:
        - policies
      description: Retrieves policy configuration for the specified policy ID. Only users with the Root Authority role are allowed to make the request.
      parameters:
        - in: path
          name: policyId
          schema:
            type: string
          required: true
          description: Selected policy ID.
      summary: Retrieves policy configuration.
      security:
      - bearerAuth: []
      responses:
        200:
          description: Successful operation.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PolicyConfig'
        401:
          description: Unauthorized.
        403:
          description: Forbidden.
        500:
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    put:
      tags:
        - policies
      description: Updates policy configuration for the specified policy ID. Only users with the Root Authority role are allowed to make the request.
      summary: Updates policy configuration.
      parameters:
        - in: path
          name: policyId
          description: Selected policy ID.
          required: true
          schema:
            type: string
      requestBody:
        description: Object that contains policy configuration.
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/PolicyConfig"
      security:
      - bearerAuth: []
      responses:
        200:
          description: Successful operation.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PolicyConfig'
        401:
          description: Unauthorized.
        403:
          description: Forbidden.
        500:
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /policies/{policyId}/publish:
    put:
      tags:
        - policies
      description: Publishes the policy with the specified (internal) policy ID onto IPFS, sends a message featuring its IPFS CID into the corresponding Hedera topic. Only users with the Root Authority role are allowed to make the request.
      parameters:
        - in: path
          name: policyId
          schema:
            type: string
          required: true
          description: Selected policy ID.
      requestBody:
        description: Object that contains policy version.
        required: true
        content:
          application/json:
              schema:
                type: object
                properties:
                  policyVersion:
                    type: string
      summary: Publishes the policy onto IPFS.
      security:
      - bearerAuth: []
      responses:
        200:
          description: Successful operation.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PublishPolicy'
        401:
          description: Unauthorized.
        403:
          description: Forbidden.
        500:
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /policies/validate:
    post:
      tags:
        - policies
      description: Validates selected policy. Only users with the Root Authority role are allowed to make the request.
      security:
      - bearerAuth: []
      summary: Validates policy.
      requestBody:
        description: Object that contains policy configuration.
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/PolicyConfig"
      responses:
        200:
          description: Successful operation.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ValidatePolicy'
        401:
          description: Unauthorized.
        403:
          description: Forbidden.
        500:
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /policies/{policyId}/blocks:
    get:
      tags:
        - policies
      description: Returns data from the root policy block. Only users with the Root Authority and Installer role are allowed to make the request.
      parameters:
        - in: path
          name: policyId
          schema:
            type: string
          required: true
          description: Selected policy ID.
      summary: Retrieves data for the policy root block.
      security:
      - bearerAuth: []
      responses:
        200:
          description: Successful operation.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PolicyBlock'
        401:
          description: Unauthorized.
        403:
          description: Forbidden.
        500:
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /policies/{policyId}/blocks/{uuid}:
    get:
      tags:
        - policies
      description: Requests block data. Only users with a role that described in block are allowed to make the request.
      parameters:
        - in: path
          name: policyId
          schema:
            type: string
          required: true
          description: Selected policy ID.
        - in: path
          name: uuid
          schema:
            type: string
          required: true
          description: Selected block UUID.
      summary: Requests block data.
      security:
      - bearerAuth: []
      responses:
        200:
          description: Successful operation.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PolicyBlockData'
        401:
          description: Unauthorized.
        403:
          description: Forbidden.
        500:
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    post:
      tags:
        - policies
      description: Sends data to the specified block.
      parameters:
        - in: path
          name: policyId
          schema:
            type: string
          required: true
          description: Selected policy ID.
        - in: path
          name: uuid
          schema:
            type: string
          required: true
          description: Selected block UUID.
      summary: Sends data to the specified block.
      requestBody:
        description: Object with the data to be sent to the block.
        required: true
        content:
          application/json:
            schema:
              type: object
      security:
      - bearerAuth: []
      responses:
        200:
          description: Successful operation.
        401:
          description: Unauthorized.
        403:
          description: Forbidden.
        500:
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /policies/{policyId}/tag/{tag}:
    get:
      tags:
        - policies
      description: Requests block ID from a policy by tag. Only users with the Root Authority and Installer roles are allowed to make the request.
      parameters:
        - in: path
          name: policyId
          schema:
            type: string
          required: true
          description: Selected policy ID.
        - in: path
          name: tag
          schema:
            type: string
          required: true
          description: Tag from the selected policy.
      summary: Requests block ID from a policy by tag.
      security:
      - bearerAuth: []
      responses:
        200:
          description: Successful operation.
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: string
        401:
          description: Unauthorized.
        403:
          description: Forbidden.
        500:
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /policies/{policyId}/export/message:
    get:
      tags:
        - policies
      description: Returns the Hedera message ID for the specified policy published onto IPFS. Only users with the Root Authority role are allowed to make the request.
      parameters:
        - in: path
          name: policyId
          schema:
            type: string
          required: true
          description: Selected policy ID.
      security:
      - bearerAuth: []
      summary: Return Heder message ID for the specified published policy.
      responses:
        200:
          description: Successful operation.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ExportPolicy'
        401:
          description: Unauthorized.
        403:
          description: Forbidden.
        500:
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /policies/{policyId}/export/file:
    get:
      tags:
        - policies
      description: Returns a zip file containing the published policy and all associated artifacts, i.e. schemas and VCs. Only users with the Root Authority role are allowed to make the request.
      parameters:
        - in: path
          name: policyId
          schema:
            type: string
          required: true
          description: Selected policy ID.
      security:
      - bearerAuth: []
      summary: Return policy and its artifacts in a zip file format for the specified policy.
      responses:
        200:
          description: Successful operation.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ExportPolicy'
        401:
          description: Unauthorized.
        403:
          description: Forbidden.
        500:
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  
  /policies/import/message:
    post:
      tags:
        - policies
      description: Imports new policy and all associated artifacts from IPFS into the local DB. Only users with the Root Authority role are allowed to make the request.
      security:
      - bearerAuth: []
      summary: Imports new policy from IPFS.
      requestBody:
        description: Object that contains the identifier of the Hedera message which contains the IPFS CID of the Policy.
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                messageId:
                  type: string
      responses:
        201:
          description: Successful operation.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/PolicyConfig'
        401:
          description: Unauthorized.
        403:
          description: Forbidden.
        500:
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /policies/import/file:
    post:
      tags:
        - policies
      description: Imports new policy and all associated artifacts, such as schemas and VCs, from the provided zip file into the local DB. Only users with the Root Authority role are allowed to make the request.
      security:
      - bearerAuth: []
      summary: Imports new policy from a zip file.
      requestBody:
        description: A zip file that contains the policy and associated schemas and VCs to be imported.
        required: true
      responses:
        201:
          description: Successful operation.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/PolicyConfig'
        401:
          description: Unauthorized.
        403:
          description: Forbidden.
        500:
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /policies/import/message/preview:
    post:
      tags:
        - policies
      description: Previews the policy from IPFS without loading it into the local DB. Only users with the Root Authority role are allowed to make the request.
      summary: Policy preview from IPFS.
      security:
      - bearerAuth: []
      requestBody:
        description: Object that contains the identifier of the Hedera message which contains the IPFS CID of the policy.
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                messageId:
                  type: string
      responses:
        200:
          description: Successful operation.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PreviewPolicy'
        401:
          description: Unauthorized.
        403:
          description: Forbidden.
        500:
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /policies/import/file/preview:
    post:
      tags:
        - policies
      description: Previews the policy from a zip file without loading it into the local DB. Only users with the Root Authority role are allowed to make the request.
      summary: Policy preview from a zip file.
      security:
      - bearerAuth: []
      requestBody:
        description: A zip file that contains the policy and associated schemas and VCs to be viewed.
        required: true
      responses:
        200:
          description: Successful operation.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PreviewPolicy'
        401:
          description: Unauthorized.
        403:
          description: Forbidden.
        500:
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /external:
    post:
      tags:
        - external
      description: Sends data from an external source.
      summary: Sends data from an external source.
      requestBody:
        description: Object that contains a VC Document.
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ExternalData"
      responses:
        201:
          description: Successful operation.
        500:
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /demo/registeredUsers:
    get:
      tags:
        - demo
      deprecated: true
      description: Returns all registered user accounts.
      responses:
        200:
          description: All registered user accounts.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Account'
        500:
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /demo/randomKey:
    get:
      tags:
        - demo
      deprecated: true
      description: Generates a new Hedera account with a random private key.
      security:
      - bearerAuth: []
      responses:
        200:
          description: Successful operation.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HederaAccount'
        401:
          description: Unauthorized.
        403:
          description: Forbidden.
        500:
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /ipfs/file:
    post:
      tags:
        - ipfs
      description: Add file to ipfs.
      summary: Add file to ipfs.
      requestBody:
        description: Data array of file.
        required: true
        content:
          binary/octet-stream:
              schema:
                type: string
                format: binary
      security:
      - bearerAuth: []
      responses:
        200:
          description: Successful operation.
          content:
            application/json:
              schema:
                description: CID of added file.
                type: string
        401:
          description: Unauthorized.
        500:
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /settings:
    get:
      tags:
        - settings
      description: Returns current settings. For users with the Root Authority role only.
      security:
      - bearerAuth: []
      summary: Returns current settings.
      responses:
        200:
          description: Successful operation.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CommonSettings'
        401:
          description: Unauthorized.
        403:
          description: Forbidden.
        500:
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    post:
      tags:
        - settings
      description: Set settings. For users with the Root Authority role only.
      security:
      - bearerAuth: []
      requestBody:
        description: Settings.
        required: true
        content:
          application/json:
              schema:
                $ref: '#/components/schemas/CommonSettings'
      summary: Set settings.
      responses:
        200:
          description: Successful operation.
        401:
          description: Unauthorized.
        403:
          description: Forbidden.
        500:
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /logs:
    post:
      tags:
        - logs
      description: Returns logs. For users with the Root Authority role only.
      security:
      - bearerAuth: []
      requestBody:
        description: Log filters.
        content:
          application/json:
              schema:
                $ref: '#/components/schemas/LogFilters'
      summary: Returns logs.
      responses:
        200:
          description: Successful operation.
          content:
            application/json:
              schema:
                type: object
                properties:
                  totalCount:
                    type: number
                  logs:
                    $ref: '#/components/schemas/Log'
        401:
          description: Unauthorized.
        403:
          description: Forbidden.
        500:
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /logs/attributes:
    get:
      tags:
        - logs
      description: Returns logs attributes. For users with the Root Authority role only.
      parameters:
        - in: query
          name: name
          schema:
            type: string
          description: Part of name.
      security:
      - bearerAuth: []
      summary: Returns logs attributes.
      responses:
        200:
          description: Successful operation.
          content:
            application/json:
              schema:
                type: array
                items: 
                  type: string
        401:
          description: Unauthorized.
        403:
          description: Forbidden.
        500:
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'